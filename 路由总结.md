# 路由过程（整合嵌套路由、动态路由和导航守卫）
## 1 引入vue.js、vue-router.js
## 2 使用插件（如果是在浏览器运行，无需引入）
```js
vue.use(VueRouter);
```
## 3 定义组件
```js
var Home = {
            template: `
            <div>
                主页<br>
            </div>

            <router-link :to='{name: "type", params: {id: "front"}}'>前端</router-link>
            <router-link :to='{name: "type", params: {id: "android"}}'>安卓</router-link>
            `
}
```

## 4 定义路由对象
```js
var router = new VueRouter({
            routes: [
                {
                    path: '/home',
                    component: Home,
                    children: [
                        {
                            path: '/login',
                            component: Login,
                            name: 'login'
                        },
                        {
                            path: '/type/:id',
                            component: Type,
                            name: 'type',
                            meta: {
                                auth: true
                            }
                        },
                    ]
                }
            ]
        });
```

## 5 定义根组件 和 根组件路由配置、渲染项,并在Vue上开启router
```js
var App = {
            template: `
            <div>
                <router-link to='/home'>主页</router-link>
                <router-view></router-view>
            </div>
            `
}

new Vue({
            el: '#app',
            template:`<App />`,
            router,
            ...
});
```

## 6 访问过程
```js
1 根组件中有/home的配置
<router-link></router-link>
以及Home组件的渲染位置
<router-view></router-view>
2 访问/home
3 找到router对象里面的/home配置,匹配找到Home组件
4 将Home组件的内容，渲染到
<router-view></router-view>


1 子路由，比如Home组件下有Login组件,同根组件原理，
在Home组件中配置/login的配置
<router-link></router-link>
以及Login组件的渲染位置
<router-view></router-view>
2 访问/home/login
3 找到router对象里面的/home对应路径下的子路径/login配置,匹配找到Login组件
4 将Login组件的内容，渲染到Home组件里的
<router-view></router-view>


1 动态路由，比如Home组件下有Type组件，子路由原理
2 根据path的'/type/:id'，表示<router-link></router-link>路由中有/type,并且参数params中存在id属性的，就算匹配到了
3 通过watch 方式将路由中目标路由中参数赋值给目标路由对应组件

watch: {
        '$route' (to, from) {
            this.msg = to.params.id;
        }
}

1 导航守卫，通过目标路由to中定义的属性来做相应操作，一定要使用next()方式空参数直接放行，或next()中传参放行到指定路径

router.beforeEach((to, from, next) => {
            if (to.meta.auth) {
                if (localStorage.getItem('user')) {
                    next();
                } else {
                    next({
                        path: '/login'
                    })
                }
            } else {
                next();
            }
})
```